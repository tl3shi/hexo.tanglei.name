---
title: åˆ†æäº†è·å¾—å®¶åº­æ‘‡å·æ–°èƒ½æºæŒ‡æ ‡çš„æ•°æ®åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç§˜å¯†
layout: post
categories:
  - ç»éªŒæŠ€å·§
tags:
  - MyLife
  - Shell
  - Mac 
  - å¼€å‘æ•ˆç‡
---


>å…³äºä½œè€…ï¼šç¨‹åºçŒ¿çŸ³å¤´(ID: tangleithu)ï¼Œç°ä»»é˜¿é‡Œå·´å·´æŠ€æœ¯ä¸“å®¶ï¼Œæ¸…åå­¦æ¸£ï¼Œå‰å¤§ç–†åç«¯ Leaderã€‚ä»¥æ¯ç¯‡æ–‡ç« éƒ½è®©äººæœ‰æ”¶è·ä¸ºç›®çš„ï¼Œæ¬¢è¿å…³æ³¨ï¼Œäº¤æµå’ŒæŒ‡å¯¼ï¼æ–‡ç« é¦–å‘äº[å¾®ä¿¡å…¬ä¼—å·](https://mp.weixin.qq.com/s?src=11&timestamp=1604109316&ver=2677&signature=lA-7iYDNTu3m0Is66BL5L5*sINruP5woH9d7PrRTIv1G3z*dIgRtcYpkC2lOr*ppxgN2pamNcSNZziv7S6JZMGc*5fYDtQIyFUWxJa1v7AJFjbiiYqyeUaRjmxFZz3Fk&new=1)ï¼Œæ¬¢è¿å…³æ³¨ã€‚åå°å›å¤å…³é”®å­— â€œ1024â€ è·å–ç¨‹åºå‘˜å¤§å‚é¢è¯•æŒ‡å—ã€‚



è¿™ä¸¤å¤©å…¬å¸ƒäº†åŒ—äº¬é¦–æ‰¹å®¶åº­æ–°èƒ½æºå°å®¢è½¦æŒ‡æ ‡ç§¯åˆ†æ’åºç»“æœã€‚

å½“ç„¶ï¼Œæ„æ–™ä¹‹ä¸­ï¼Œå¾ˆé—æ†¾ï¼Œæœ¬äººå¹¶æœªå…¥å›´ï¼Œæ’å 8W å·¦å³ã€‚çœ‹æ ·å­ï¼Œè¦æƒ³æ–°èƒ½æºç§¯åˆ†æ’åºä¸Šå»ï¼Œè¿˜å¾—æŠ“ç´§å¢åŠ å®¶åº­ä»£é™…æ•°å•Šã€‚ 

![img](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/1.jpg)


è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ•°æ®éƒ½æ˜¯æ€æ ·çš„ï¼Ÿ

ç½‘ç«™ä¸‹è½½äº† pdfï¼Œä¸ä¾¿äºåˆ†æï¼Œæ˜¾ç„¶ä½œä¸ºç¨‹åºçŒ¿è¿˜æ˜¯ä¹ æƒ¯ç”¨ç¨‹åºå‘˜çš„æ–¹å¼æ¥è¿›è¡Œåˆ†æï¼Œé¦–å…ˆè¿˜æ˜¯å…ˆè½¬ä¸ºçº¯æ–‡æœ¬æ–‡ä»¶å§ï¼Œå¯è½¬æ¢ä¸º csvã€‚

1. ç½‘ä¸Šæœ‰å·¥å…·ï¼Œå¯ä¸Šä¼  pdfï¼Œè½¬ csvã€‚
2. å¯ä»¥ç›´æ¥ copy å‡ºæ¥ï¼Œç²˜è´´çº¯æ–‡æœ¬å³å¯ã€‚ç¬”è€…é‡‡ç”¨äº†è¿™ç§æ–¹å¼å¾ˆå¿«ã€‚

æœ‰äº†å‰é¢è¿™ä¸¤ç¯‡æ–‡ç« ä½œä¸ºåŸºç¡€ï¼Œä¸‹é¢è¿™äº›æ•°æ®å¯è½»æ˜“è·å¾—ï¼š

1. [æå‡å¼€å‘æ•ˆç‡Nå€çš„20+å‘½ä»¤è¡Œç¥å™¨!(é™„ demo)](http://mp.weixin.qq.com/s?__biz=MzI3OTUzMzcwNw==&mid=2247489026&idx=1&sn=cf1650652a44d65730c5ee04258ad9e1&chksm=eb4717e6dc309ef037674943645abe8356aa726416ea46f3349ba227520bd40c95f8a49aa3e5&scene=21#wechat_redirect)
2. [æ²¡æƒ³åˆ° Shell å‘½ä»¤ç«Ÿç„¶è¿˜èƒ½è¿™ä¹ˆç©ï¼Ÿ| Shell ç©è½¬å¤§æ•°æ®åˆ†æ](http://mp.weixin.qq.com/s?__biz=MzI3OTUzMzcwNw==&mid=2247488114&idx=1&sn=b6191483135ecd7f7c0b735bc2dbe7a7&chksm=eb471396dc309a80ba8df35f9e04ab585a80cb3f9e485fdf4c9afd380200c2d109b28335a00b&scene=21#wechat_redirect)

å› ä¸º copy å‡ºæ¥çº¯æ–‡æœ¬ï¼Œå§“åå’Œèº«ä»½è¯è¿åœ¨ä¸€èµ·äº†ï¼Œéœ€è¦æ‹†åˆ†ä¸€ä¸‹ï¼Œå¾ˆç®€å•ï¼š

``` 
cat car2020.csv | awk '{print substr($3, 1, match($3,/[0-9]/)-1) "\t"  substr($3, match($3,/[0-9]/)) "\t" $4 "\t" $5 "\t" $6 "\t" $7}' > car-2020.csv 
```

![æ‘‡å·æ•°æ®é›†csv](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/2.png)

#### åˆ†æ•°åˆ†æ 

é¦–å…ˆï¼Œæ–‡ä»¶ç»“æœç›´æ¥æŒ‰ç…§åˆ†æ•°å€’åºçš„ã€‚

- æœ€é«˜åˆ† 228 åˆ†ï¼Œå®¶åº­å…± 7 ä¸ªäººç»„æˆã€‚
- æœ€ä½åˆ† 72 åˆ†ï¼Œ2 ä»£ 4 äººçš„å®¶åº­å±…å¤šï¼Œä¹Ÿæœ‰ 3 ä»£ 4 äººçš„ã€‚

çœ‹çœ‹åˆ†æ•°çš„åˆ†å¸ƒï¼Œå¤§å¤šæ•°å›´ç»•ç€ 70 -120 åˆ†ä¹‹é—´ï¼Œå æ¯” 80%ã€‚

```shell
cat car-2020.csv | awk '{print $5}'  | uniq -c  | sort -k 1 -nr
```

![ç§¯åˆ†åˆ†å¸ƒ](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/%E7%A7%AF%E5%88%86%E5%88%86%E5%B8%83.png)

![](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/%E7%A7%AF%E5%88%86%E5%88%86%E5%B8%831.png)

#### å®¶åº­æƒ…å†µ

- å®¶åº­ä»£æ•°ï¼Œ è¿‘ 70% ä¸º 3 ä»£äººã€‚

  ```shell
  âœ Downloads cat car-2020.csv | awk '{print $4}'  | sort | uniq -c
  6621 2
  13379 3
  ```

  ![](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/3.png)

- å®¶åº­äººå£æ•°ï¼Œå±…ç„¶è¿˜æœ‰ 9 å£äººçš„ã€‚çœ‹äº†ä¸‹ï¼Œ9 å£äºº 3 ä»£ï¼ŒçŒœæµ‹ åŒæ–¹çˆ¶æ¯ 4 + ä¸¤å£ 2 + 3 å°å­©ï¼Ÿè¿˜æ˜¯æ€æ ·çš„ï¼Œæˆ‘çœ‹å®¶åº­ä¸»è¦ç”³è¯·äººä¹Ÿæ˜¯ä»ç¬¬ä¸€æœŸå°±å¼€å§‹ç”³è¯·æ‘‡å·äº†ï¼Œè¿™ä¹ˆå¤§ä¸€å®¶äººï¼Œä¹Ÿæ²¡ä¸ªè½¦ç‰Œï¼Œä¹Ÿæ˜¯ä¸å®¹æ˜“å•Šã€‚ 

  ![](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/4.png)
  
  ```shell
  âœ  Downloads cat car-2020.csv | awk '{print $3}'  | sort | uniq -c
  4245 3
  5124 4
  6912 5
  2284 6
  1240 7
   193 8
     2 9
  ```

#### æ‘‡å·ä¸»ç”³è¯·äºº

å¤ªå¤šäººä»ç¬¬ä¸€å¹´å°±å¼€å§‹äº†å‚ä¸æ‘‡å·äº†ã€‚ 

```shell
âœ  Downloads cat car-2020.csv | awk '{print substr($6, 1, 4)}'  | sort | uniq -c
6874 2011
7401 2012
3729 2013
1384 2014
 482 2015
 111 2016
  19 2017
```

![img](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/5.png)

çœ‹äº†ä¸‹ï¼Œä»ç¬¬ä¸€æœŸæ‘‡å·çš„å°±æœ‰ 1367 ä¸ªã€‚ 

```shell
âœ  Downloads cat car-2020.csv | awk '{print substr($6, 1, 7)}'  | sort | uniq -c 
1367 2011-01
 797 2011-02
 665 2011-03
 519 2011-04
 473 2011-05
 356 2011-06
 424 2011-07
 448 2011-08
 407 2011-09
 516 2011-10
 434 2011-11
 468 2011-12
```

#### ä¸­ç­¾è€…è€å®¶å“ªé‡Œçš„ï¼Ÿ

è¿™ä¸ªï¼Œéœ€è¦å€ŸåŠ©èº«ä»½è¯å·å¯¹åº”çš„è¡Œæ”¿åŒºåŸŸäº†ï¼Œæ€è·¯è·Ÿä¹‹å‰ [æ²¡æƒ³åˆ° Shell å‘½ä»¤ç«Ÿç„¶è¿˜èƒ½è¿™ä¹ˆç©ï¼Ÿ| Shell ç©è½¬å¤§æ•°æ®åˆ†æ](http://mp.weixin.qq.com/s?__biz=MzI3OTUzMzcwNw==&mid=2247488114&idx=1&sn=b6191483135ecd7f7c0b735bc2dbe7a7&chksm=eb471396dc309a80ba8df35f9e04ab585a80cb3f9e485fdf4c9afd380200c2d109b28335a00b&scene=21#wechat_redirect) è¿™ç¯‡æ–‡ç« ä¸Šä¸€æ ·ï¼Œç›´æ¥ç»™ç»“è®ºå§ã€‚å…ˆçœ‹æŒ‰ç…§çœè¿™ä¸ªçº§åˆ«æ¥åˆ’åˆ†çš„ã€‚

```shell
âœ  Downloads join -1 2 -2 1 <(cat car-2020.csv | awk '{print substr($2, 1, 2)}' |sort | uniq -c | sort -k1 -nr | head -n 30 | sort -k2) id-area.code2.sort.txt | sort -k2 -nr
11 14792 åŒ—äº¬å¸‚
13 1101 æ²³åŒ—çœ
37 638 å±±ä¸œçœ
41 360 æ²³å—çœ
14 330 å±±è¥¿çœ
23 296 é»‘é¾™æ±Ÿçœ
21 291 è¾½å®çœ
42 239 æ¹–åŒ—çœ
15 224 å†…è’™å¤è‡ªæ²»åŒº
22 217 å‰æ—çœ
43 175 æ¹–å—çœ
61 174 é™•è¥¿çœ
34 169 å®‰å¾½çœ
32 162 æ±Ÿè‹çœ
51 161 å››å·çœ
36 135 æ±Ÿè¥¿çœ
12 107 å¤©æ´¥å¸‚
62 82 ç”˜è‚ƒçœ
33 64 æµ™æ±Ÿçœ
35 53 ç¦å»ºçœ
65 46 æ–°ç–†ç»´å¾å°”æ—è‡ªæ²»åŒº
64 34 å®å¤å›æ—è‡ªæ²»åŒº
45 33 å¹¿è¥¿å£®æ—è‡ªæ²»åŒº
50 21 é‡åº†å¸‚
63 19 é’æµ·çœ
53 19 äº‘å—çœ
44 19 å¹¿ä¸œçœ
52 17 è´µå·çœ
31 12 ä¸Šæµ·å¸‚
46 6 æµ·å—çœ
```

- ç¬¬ä¸€åˆ—ï¼šèº«ä»½è¯å¼€å¤´çš„ä¸¤ä½ï¼ŒåŸºæœ¬å®šä½åˆ°çœï¼›
- ç¬¬äºŒåˆ—ï¼šå¯¹åº”çš„äººæ•°
- ç¬¬ä¸‰åˆ—ï¼šå¯¹åº”çœ

![](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/6.png)

ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿˜æ˜¯è€åŒ—äº¬å æ¯”æœ€å¤§ï¼Œå æ¯”74%äº†ã€‚çŸ³å¤´æƒ³æ‰¾ä¸ªå…è´¹çš„çƒ­åŠ›åœ°å›¾ç”Ÿæˆå·¥å…·å±•ç¤ºä¸€ä¸‹çš„ï¼ŒçŸ­æ—¶é—´ä¹‹ç±»æ²¡æ‰¾åˆ°ï¼Œå…ˆæ”¾å¼ƒäº†ã€‚

- å†çœ‹çœ‹åˆ°å¸‚åŒºçº§åˆ«çš„ï¼Œå‚è€ƒèº«ä»½è¯å‰ 6 ä½ã€‚

å…ˆçœ‹çœ‹å‰ 30 çš„å§ï¼ŒåŸºæœ¬ä¹Ÿå°±æ˜¯å›´ç»•ç€åŒ—äº¬äº†ã€‚

```shell
âœ  Downloads join -1 2 -2 1 <(cat car-2020.csv | awk '{print substr($2, 1, 6)}' |sort | uniq -c | sort -k1 -nr | head -n 30 | sort -k2) address_code_uniq.csv | sort -k2 -nr
110111 1592 æˆ¿å±±åŒº
110223 1531 é€šå¿
110224 1439 å¤§å…´å¿
110108 1109 æµ·æ·€åŒº
110105 1108 æœé˜³åŒº
110222 1075 é¡ºä¹‰å¿
110229 846 å»¶åº†å¿
110106 734 ä¸°å°åŒº
110221 725 æ˜Œå¹³å¿
110226 610 å¹³è°·å¿
110228 599 å¯†äº‘å¿
110102 570 è¥¿åŸåŒº
110227 557 æ€€æŸ”å¿
110101 475 ä¸œåŸåŒº
110104 471 å®£æ­¦åŒº
110109 415 é—¨å¤´æ²ŸåŒº
110103 382 å´‡æ–‡åŒº
110107 332 çŸ³æ™¯å±±åŒº
110225 189 æˆ¿å±±å¿
131082 43 ä¸‰æ²³å¸‚
230103 34 å—å²—åŒº
140202 28 åŸåŒº
110110 25 ç‡•å±±åŒº
220104 24 æœé˜³åŒº
150102 23 æ–°åŸåŒº
130102 23 é•¿å®‰åŒº
610103 22 ç¢‘æ—åŒº
130203 21 è·¯åŒ—åŒº
420106 19 æ­¦æ˜ŒåŒº
130681 18 æ¶¿å·å¸‚
```

å…¶ä¸­ï¼Œaddress_code_uniq.csv æ¥è‡ª https://raw.githubusercontent.com/jxlwqq/address-code-of-china/master/address_code.csvï¼Œæœ‰ä¸ªå‘çš„åœ°æ–¹å°±æ˜¯æ”¿åºœå®˜æ–¹ç½‘ç«™ä¸‹è½½çš„è¡Œæ”¿åŒºåŸŸä»£ç æ•°æ® [http://www.mca.gov.cn//article/sj/xzqh/2020/](http://www.mca.gov.cn//article/sj/xzqh/2020/)æ˜¯æœ€æ–°çš„ï¼Œæœ‰çš„è¡Œæ”¿åŒºåŸŸä»£ç å·²æ’¤é”€ï¼Œä¸å†ä½¿ç”¨ã€‚ï¼ˆå¹¸äºçŸ³å¤´æ ¡éªŒäº†ä¸€ä¸‹ç»“æœæ•°æ®ï¼Œå‘ç°ç›¸å·®æ¯”è¾ƒå¤§ï¼‰

ä½†ä¹‹å‰å·²ç»æ ¸å‘çš„èº«ä»½è¯ä¸­ä¸èƒ½ä½œåºŸå§ã€‚ä¸¾ä¸ªä¾‹å­ï¼šè¡Œæ”¿åŒºåˆ’ä»£ç 110223(åŒ—äº¬å¸‚ é€šå¿)å·²æ’¤é”€ï¼Œæ–°å‘çš„èº«ä»½è¯ä¸­ä¸å†ä½¿ç”¨ã€‚

å¦å¤–ï¼Œè¿˜å‘ç°æœ‰ä¸€ä¾‹ä¸æ˜¯ç”¨èº«ä»½è¯å·ç ä½œä¸ºè¯ä»¶å·ç çš„ï¼Ÿçœ‹æ ·å­æ˜¯æŠ¤ç…§ï¼Ÿ`CH1HFP********`  è¿™ä¸ªï¼Œæˆ‘ä¹Ÿä¸æ‡‚äº†ã€‚ 

å…ˆå°±è¿™ä¹ˆå¤šå§ã€‚å¦å¤–ï¼Œè‹¥æ„Ÿå…´è¶£çš„æœ‹å‹éœ€è¦æœ¬æ–‡åˆ†æçš„æ•°æ®é›†åˆç”¨ä½œäº¤æµå­¦ä¹ ä½¿ç”¨ï¼Œå¯å›å¤â€œç§¯åˆ†æ’åºâ€è·å–å¤„ç†çš„ Excelå’Œ CSV æ–‡ä»¶ã€‚

é™„ã€Šæ‘‡å·è§£é¢˜ç§¯åˆ†å¯¹ç…§è¡¨ã€‹

![img](https://www.tanglei.name/resources/data-analysis-of-first-new-energy-car-tickets/7.png)

å›åˆ°é¢˜ç›®æœ¬èº«ï¼Œè¿™ä¸ªãŠ™ï¸ç§˜å¯†å°±æ˜¯ï¼šå¦‚æœè¦æƒ³å®¶åº­æ‘‡å·å°½æ—©â€œä¸­ç­¾â€ï¼Œé‚£å°±èµ¶ç´§ç”Ÿå¨ƒå§ï¼Œå“ˆå“ˆå“ˆğŸ˜ï¼Œåˆ«æ‰“æˆ‘ã€‚

> å…³äºä½œè€…ï¼šç¨‹åºçŒ¿çŸ³å¤´(ID: tangleithu)ï¼Œç°ä»»é˜¿é‡Œå·´å·´æŠ€æœ¯ä¸“å®¶ï¼Œæ¸…åå­¦æ¸£ï¼Œå‰å¤§ç–†åç«¯ Leaderï¼Œæ¬¢è¿å…³æ³¨ï¼Œäº¤æµå’ŒæŒ‡å¯¼ï¼
>
> æ¬¢è¿æ‰«ç åŠ å…¥äº’è”ç½‘å¤§å‚å†…æ¨ç¾¤ & æŠ€æœ¯äº¤æµç¾¤ï¼Œä¸€èµ·å­¦ä¹ ã€å…±åŒè¿›æ­¥ã€‚åå°å›å¤å…³é”®å­— â€œ**0**â€ é€é˜¿é‡ŒæŠ€æœ¯å¤§ç¤¼åŒ…ã€‚

